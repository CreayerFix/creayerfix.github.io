(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{785:function(e,t,r){Promise.resolve().then(r.bind(r,6344))},6344:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(7437),s=r(3667),i=r(836),a=class extends s.z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:(0,i.Gm)()})}getOptimisticResult(e){return e.behavior=(0,i.Gm)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){let{state:r}=e,n=super.createResult(e,t),{isFetching:s,isRefetching:a,isError:c,isRefetchError:o}=n,u=r.fetchMeta?.fetchMore?.direction,l=c&&"forward"===u,f=s&&"forward"===u,h=c&&"backward"===u,d=s&&"backward"===u;return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,i.Qy)(t,r.data),hasPreviousPage:(0,i.ZF)(t,r.data),isFetchNextPageError:l,isFetchingNextPage:f,isFetchPreviousPageError:h,isFetchingPreviousPage:d,isRefetchError:o&&!l&&!h,isRefetching:a&&!f&&!d}}},c=r(4713),o=r(2265),u=r(4839),l=function(e){let{threshold:t=.1,root:r=null,rootMargin:n="0px"}=e,s=(0,o.useRef)(null),[i,a]=(0,o.useState)(null),[c,u]=(0,o.useState)(!1),l=(0,o.useRef)(null),f=e=>{let[t]=e;a(t),u(t.isIntersecting)};return(0,o.useEffect)(()=>{if(!window.IntersectionObserver)return;let e=new IntersectionObserver(f,{root:r,rootMargin:n,threshold:t});l.current=e;let i=s.current;return i&&e.observe(i),()=>{l.current&&i&&l.current.unobserve(i)}},[r,n,t]),{entry:i,isVisible:c,elementRef:s,observe:e=>{l.current&&e&&l.current.observe(e)},unobserve:e=>{l.current&&e&&l.current.unobserve(e)}}},f=r(5237);let h=r(9183).ZP.div.withConfig({componentId:"sc-42ff00bb-0"})([""]);function d(){var e;let{isVisible:t,observe:r,elementRef:s}=l({threshold:.3}),{data:i,isFetching:d,isError:g,fetchNextPage:p}=(e={queryKey:["fetchItems"],queryFn:async e=>{let{pageParam:t=1}=e,{data:r}=await (0,f.Y)().get("/posts",{params:{_limit:10,_page:t}});return r},getNextPageParam:(e,t)=>e.length>0?t.length+1:void 0,initialPageParam:1},(0,c.r)(e,a,void 0));return(0,o.useEffect)(()=>{s.current&&r(s.current)},[s,r]),(0,o.useEffect)(()=>{t&&p()},[t,p]),(0,n.jsxs)(h,{className:(0,u.Z)("infiniteScrollPage"),children:[(0,n.jsx)("ul",{children:null==i?void 0:i.pages.flatMap(e=>e).map(e=>(0,n.jsx)("li",{children:e.title},e.id))}),(0,n.jsxs)("div",{children:[d&&(0,n.jsx)("div",{children:"데이터를 로딩 중..."}),g&&(0,n.jsx)("div",{children:"데이터를 가져오는 데 실패했습니다."}),(0,n.jsx)("div",{className:"infiniteScrolRef",ref:s})]})]})}},5237:function(e,t,r){"use strict";r.d(t,{Y:function(){return a}});var n=r(8472),s=r(5566);n.Z.defaults.baseURL="http://localhost:3001";let i=s.env.NEXT_PUBLIC_SHOPBY_CLIENT_ID||"x+qbJGxgUeET3/KGqHj48g==",a=()=>{let e=n.Z.create({withCredentials:!1});return e.interceptors.request.use(async e=>(e.headers&&(e.headers.set("Content-Type","application/json; charset=UTF-8"),e.headers.set("Accept","application/json"),e.headers.set("clientid",i)),e),e=>Promise.reject(e)),e.interceptors.response.use(e=>e,async e=>{if(!e.response)return Promise.reject(e);let{status:t}=e.response;return 401===t&&(window.location.pathname.includes("/sign/out")||(window.location.href="/sign/out?expired=true")),Promise.reject(e)}),e}},836:function(e,t,r){"use strict";r.d(t,{Gm:function(){return s},Qy:function(){return c},ZF:function(){return o}});var n=r(6298);function s(e){return{onFetch:(t,r)=>{let s=t.options,c=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],u=t.state.data?.pageParams||[],l={pages:[],pageParams:[]},f=0,h=async()=>{let r=!1,h=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)})},d=(0,n.cG)(t.options,t.fetchOptions),g=async(e,s,i)=>{if(r)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);let a=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:i?"backward":"forward",meta:t.options.meta};return h(e),e})(),c=await d(a),{maxPages:o}=t.options,u=i?n.Ht:n.VX;return{pages:u(e.pages,c,o),pageParams:u(e.pageParams,s,o)}};if(c&&o.length){let e="backward"===c,t={pages:o,pageParams:u},r=(e?a:i)(s,t);l=await g(t,r,e)}else{let t=e??o.length;do{let e=0===f?u[0]??s.initialPageParam:i(s,l);if(f>0&&null==e)break;l=await g(l,e),f++}while(f<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=h}}}function i(e,{pages:t,pageParams:r}){let n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function a(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function c(e,t){return!!t&&null!=i(e,t)}function o(e,t){return!!t&&!!e.getPreviousPageParam&&null!=a(e,t)}}},function(e){e.O(0,[183,336,33,971,23,744],function(){return e(e.s=785)}),_N_E=e.O()}]);